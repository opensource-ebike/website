<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-bafang/Hardware/CANBUS/canbus">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="OpenSource-EBike" href="/opensearch.xml">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9270569596814796" crossorigin="anonymous"></script><title data-rh="true">CANBUS | OpenSource-EBike</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://opensource-ebike.org/docs/bafang/Hardware/CANBUS/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CANBUS | OpenSource-EBike"><meta data-rh="true" name="description" content="Summary"><meta data-rh="true" property="og:description" content="Summary"><link data-rh="true" rel="icon" href="/img/hotlink-ok/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://opensource-ebike.org/docs/bafang/Hardware/CANBUS/"><link data-rh="true" rel="alternate" href="https://opensource-ebike.org/docs/bafang/Hardware/CANBUS/" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://opensource-ebike.org/docs/bafang/Hardware/CANBUS/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WZ05W1IA1Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.73f5193e.css">
<link rel="preload" href="/assets/js/runtime~main.56828880.js" as="script">
<link rel="preload" href="/assets/js/main.f1cf1c2b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/hotlink-ok/logo/logo.svg" alt="OpenSource-Ebike logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/hotlink-ok/logo/logo.svg" alt="OpenSource-Ebike logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OpenSource-Ebike</b></a><a class="navbar__item navbar__link" href="/docs/tsdz2/intro">TSDZ2</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/bafang/intro">Bafang</a><a class="navbar__item navbar__link" href="/docs/display/intro">Display</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/bafang/Hardware/CANBUS/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><a href="https://github.com/OpenSourceEBike/OpenSourceEBike.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/bafang/intro">M500/M600 Wiki</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/bafang/development">Developement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/bafang/BESST">BESST Software</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/bafang/Hardware/">Hardware</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/bafang/Hardware/CANBUS/">CANBUS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/bafang/Hardware/Display/display_DP_C241">Display</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bafang/Hardware/maintenance_and_repair">maintenance_and_repair</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/bafang/Hardware/"><span itemprop="name">Hardware</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CANBUS</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>CANBUS</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>These documents, dumps and projects explain everything we currently know about the Bafang CANBUS protocol</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="diy-canbus-configuration">DIY CANBUS configuration<a class="hash-link" href="#diy-canbus-configuration" title="Direct link to heading">​</a></h2><p>To configure the Bafang M500 / M600 motor without using the BESST programmer, you can use this interface.</p><p>Link interface USB to CAN on Amazon:
<a href="https://www.amazon.co.uk/USB-Converter-" target="_blank" rel="noopener noreferrer">https://www.amazon.co.uk/USB-Converter-</a> ... 709&amp;sr=8-2</p><p>Link cables Bafang HMI M500/M600 on e-bike-technologies:
<a href="https://www.e-bike-technologies.de/inde" target="_blank" rel="noopener noreferrer">https://www.e-bike-technologies.de/inde</a> ... 5-f-detail
<a href="https://www.e-bike-technologies.de/inde" target="_blank" rel="noopener noreferrer">https://www.e-bike-technologies.de/inde</a> ... 5-f-detail</p><p>Below are the software and the instructions for configuration and use.
You might need to set InnoMaker to &quot;loopback mode&quot; for the settings to stick.</p><p><code>TODO: Insert images</code></p><p>(<a href="https://endless-sphere.com/forums/viewtopic.php?f=28&amp;t=100777&amp;start=400#p1595302" target="_blank" rel="noopener noreferrer">https://endless-sphere.com/forums/viewtopic.php?f=28&amp;t=100777&amp;start=400#p1595302</a>)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pinout">Pinout<a class="hash-link" href="#pinout" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HIGO-B5-Female:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /    1   5 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \    3   4 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 Orange: VCC/Ctrl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 White : CL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 Brown : P+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 Green : CH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 Black : GND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bit Rate 250 kBit/s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="level-matching">Level matching:<a class="hash-link" href="#level-matching" title="Direct link to heading">​</a></h5><table><thead><tr><th>L9</th><th>L5</th><th>L3</th><th>Byte</th></tr></thead><tbody><tr><td>Walk</td><td>Walk</td><td>Walk</td><td>06</td></tr><tr><td>0</td><td>0</td><td>0</td><td>00</td></tr><tr><td>1</td><td></td><td></td><td>01</td></tr><tr><td>2</td><td>1</td><td></td><td>0B</td></tr><tr><td>3</td><td></td><td>1</td><td>0C</td></tr><tr><td>4</td><td>2</td><td></td><td>0D</td></tr><tr><td>5</td><td></td><td>2</td><td>02</td></tr><tr><td>6</td><td>3</td><td></td><td>15</td></tr><tr><td>7</td><td></td><td></td><td>16</td></tr><tr><td>8</td><td>4</td><td></td><td>17</td></tr><tr><td>9</td><td>5</td><td>3</td><td>03</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_LWe7" id="the-following-canbus-frameids-have-been-identified">The following Canbus frameid&#x27;s have been identified:<a class="hash-link" href="#the-following-canbus-frameids-have-been-identified" title="Direct link to heading">​</a></h5><table><thead><tr><th>Function</th><th>GET/SET</th><th>second-last-digit</th><th>last-digit</th></tr></thead><tbody><tr><td>announceUpgrade</td><td>20</td><td>00</td><td></td></tr><tr><td>startUpgradeTransfer</td><td>20</td><td>01</td><td></td></tr><tr><td>pulse</td><td>GET</td><td>30</td><td>00</td></tr><tr><td>unknown</td><td>?</td><td>30</td><td>05</td></tr><tr><td>sensorSignal</td><td>GET</td><td>31</td><td>00</td></tr><tr><td>controllerInformation</td><td>GET</td><td>32</td><td>00</td></tr><tr><td>controllerInformation_1</td><td>GET</td><td>32</td><td>01</td></tr><tr><td>controllerInformation_2</td><td>GET</td><td>32</td><td>02</td></tr><tr><td>controllerInformation_3</td><td>GET/SET</td><td>32</td><td>03</td></tr><tr><td>controllerInformation_4</td><td>GET</td><td>32</td><td>04</td></tr><tr><td>controllerInformation_5</td><td>GET</td><td>32</td><td>05</td></tr><tr><td>batteryInformation</td><td>GET</td><td>34</td><td>00</td></tr><tr><td>batteryInformation_1</td><td>GET</td><td>34</td><td>01</td></tr><tr><td>batteryInformation_2</td><td>GET</td><td>34</td><td>02</td></tr><tr><td>besst</td><td>GET</td><td>35</td><td>00</td></tr><tr><td>transmissionInformation</td><td>GET</td><td>36</td><td>00</td></tr><tr><td>transmissionInformation_1</td><td>GET</td><td>36</td><td>01</td></tr><tr><td>transmissionInformation_2</td><td>GET</td><td>36</td><td>02</td></tr><tr><td>transmissionInformation_3</td><td>GET</td><td>36</td><td>03</td></tr><tr><td>eletronicLockInformation</td><td>GET</td><td>37</td><td>00</td></tr><tr><td>hardwareVersionNumber</td><td>GET/SET</td><td>60</td><td>00</td></tr><tr><td>softwareVersionNumber</td><td>GET</td><td>60</td><td>01</td></tr><tr><td>modelNumber</td><td>GET/SET</td><td>60</td><td>02</td></tr><tr><td>serialNumber</td><td>GET/SET</td><td>60</td><td>03</td></tr><tr><td>customerNumber</td><td>GET/SET</td><td>60</td><td>04</td></tr><tr><td>manufacturer</td><td>GET/SET</td><td>60</td><td>05</td></tr><tr><td>params</td><td>GET/SET</td><td>60</td><td>06</td></tr><tr><td>errorCode</td><td>GET/SET</td><td>60</td><td>07</td></tr><tr><td>bootLoad</td><td>GET/SET</td><td>60</td><td>08</td></tr><tr><td>conParams_1</td><td>GET/SET</td><td>60</td><td>11</td></tr><tr><td>conParams_2</td><td>GET/SET</td><td>60</td><td>12</td></tr><tr><td>conParams_3</td><td>GET/SET</td><td>60</td><td>13</td></tr><tr><td>conParams_4</td><td>GET/SET</td><td>60</td><td>14</td></tr><tr><td>conParams_5</td><td>GET/SET</td><td>60</td><td>15</td></tr><tr><td>conParams_6</td><td>GET/SET</td><td>60</td><td>16</td></tr><tr><td>conParams_7</td><td>GET/SET</td><td>60</td><td>17</td></tr><tr><td>conParams_8</td><td>GET/SET</td><td>60</td><td>18</td></tr><tr><td>sensorCalibration</td><td>GET</td><td>61</td><td>00</td></tr><tr><td>positionSensorCalibration</td><td>SET</td><td>62</td><td>00</td></tr><tr><td>clear_Hmi_Total_Mileage</td><td>SET</td><td>62</td><td>01</td></tr><tr><td>set_Hmi_Time</td><td>SET</td><td>62</td><td>02</td></tr><tr><td>clear_Hmi_Single_Mileage</td><td>SET</td><td>62</td><td>03</td></tr><tr><td>controllerFeatures</td><td>GET</td><td>62</td><td>15</td></tr><tr><td>dataOfHmi</td><td>GET</td><td>63</td><td>00</td></tr><tr><td>dataOfHmi_1</td><td>GET</td><td>63</td><td>01</td></tr><tr><td>dataOfHmi_2</td><td>GET/SET</td><td>63</td><td>02</td></tr><tr><td>dataOfHmi_3</td><td>GET</td><td>63</td><td>03</td></tr><tr><td>dataOfHmi_4</td><td>GET</td><td>63</td><td>04</td></tr><tr><td>designInformation</td><td>GET</td><td>64</td><td>?</td></tr><tr><td>chargingInformation</td><td>GET</td><td>64</td><td>01</td></tr><tr><td>batteryCellsInformation</td><td>GET</td><td>64</td><td>02</td></tr><tr><td>batteryCellsInformation_1</td><td>GET</td><td>64</td><td>03</td></tr><tr><td>batteryCellsInformation_2</td><td>GET</td><td>64</td><td>04</td></tr><tr><td>batteryCellsInformation_3</td><td>GET</td><td>64</td><td>05</td></tr><tr><td>batteryCellsInformation_4</td><td>GET</td><td>64</td><td>06</td></tr><tr><td>batteryCellsInformation_5</td><td>GET</td><td>64</td><td>07</td></tr><tr><td>batteryCellsInformation_6</td><td>GET</td><td>64</td><td>08</td></tr><tr><td>batteryCellsInformation_7</td><td>GET</td><td>64</td><td>09</td></tr><tr><td>batteryCharacteristics</td><td>GET</td><td>64</td><td>15</td></tr><tr><td>set_Hmi_Card</td><td>SET</td><td>65</td><td>00</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="global-enums-in-besst-code">Global Enums in BESST code<a class="hash-link" href="#global-enums-in-besst-code" title="Direct link to heading">​</a></h2><h5 class="anchor anchorWithStickyNavbar_LWe7" id="source-and-target-devices-on-the-canbus">Source and target devices on the canbus.<a class="hash-link" href="#source-and-target-devices-on-the-canbus" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Torque sensor   : 0x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Controller      : 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HMI             : 0x03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Battery         : 0x04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BESST interface : 0x05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Advanced        : 0x1f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="references-for-the-besst-usb-tool-used-to-send-certain-canbus-commands">References for the BESST USB tool used to send certain CANBUS commands<a class="hash-link" href="#references-for-the-besst-usb-tool-used-to-send-certain-canbus-commands" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">WRITE_CMD           : 0x00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">READ_CMD            : 0x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NORMAL_ACK          : 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR_ACK           : 0x03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LONG_START_CMD      : 0x04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LONG_TRANG_CMD      : 0x05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LONG_END_CMD        : 0x06</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LONG_WARNING_CMD    : 0x07</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OPT_HARDWARE_VERSION    : 0x00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPT_SOFTWARE_VERSION    : 0x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPT_MODEL_VERSION       : 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPT_SN                  : 0x03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPT_CLIENT_NO           : 0x04</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These can be used using our CANBUS frameid calculator here:
<a href="https://ornias1993.github.io/Bafang_M500_M600/index.html" target="_blank" rel="noopener noreferrer">https://ornias1993.github.io/Bafang_M500_M600/index.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-working-canbus-commands">Known working CANBUS commands<a class="hash-link" href="#known-working-canbus-commands" title="Direct link to heading">​</a></h2><h5 class="anchor anchorWithStickyNavbar_LWe7" id="besst-speedwheelcircumference-setup">BESST Speed/Wheel/Circumference Setup<a class="hash-link" href="#besst-speedwheelcircumference-setup" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Decoding example: 05103203 6 70 17 B5 01 C0 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID: 05103203</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Speed Limit Byte   1/0  : 70 17 -&gt; 0x1770              = 6000   =&gt; 60.00km/h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wheel Size Byte    3/2  : B5 01 -&gt; 0x01B5 -&gt; 0x01B . 5 = 27 . 5 =&gt; 27.5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Circumference Byte 5/4  : C0 08 -&gt; 0x08C0              = 2240   =&gt; 2240mm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Decoding example: 05103203 6 C4 09 D0 01 C0 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID: 05103203</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Speed Limit Byte   1/0  : C4 09 -&gt; 0x09C4              = 2500   =&gt; 25.00km/h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wheel Size Byte    3/2  : D0 01 -&gt; 0x01D0 -&gt; 0x01D . 0 = 29 . 0 =&gt; 29.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Circumference Byte 5/4  : E8 08 -&gt; 0x08E8              = 2280   =&gt; 2280mm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Little-Endian byte order!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="besst-torque-sensor-calibration">BESST Torque Sensor Calibration<a class="hash-link" href="#besst-torque-sensor-calibration" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ID: 05106101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Byte: 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="besst-position-sensor-calibration">BESST Position Sensor Calibration<a class="hash-link" href="#besst-position-sensor-calibration" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ID: 05116201</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Bytes: 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="controller--batterylevel-informations">Controller % Battery/Level Informations<a class="hash-link" href="#controller--batterylevel-informations" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ID: 02F83200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Byte: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Battery Byte 0        : 50%(0x32) = 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Byte 1/2/3              : 00 00 00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Byte 4                  : EE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Byte 5                  : 02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Level Byte 6/7          : FF FF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="controller-speedcurrentvoltagetemperature-informations">Controller Speed/Current/Voltage/Temperature Informations<a class="hash-link" href="#controller-speedcurrentvoltagetemperature-informations" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Decoding example: 02F83201 8 C4 09 E8 03 E2 14 32 3C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID: 02F83201</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Byte: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Speed Byte   1/0    : C4 09 -&gt; 0x09C4 = 2500 =&gt; 25.00km/h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Current Byte 3/2    : E8 03 -&gt; 0x03E8 = 1000 =&gt; 10.00A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Voltage Byte 5/4    : E2 14 -&gt; 0x14E2 = 5346 =&gt; 53.46V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Temp. Control. Byte 6   : 32    -&gt; 0x32   = 50   -&gt; 50 - 40 = 10 =&gt; 10°C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Temp. Motor Byte 7  : 3C    -&gt; 0x3C   = 60   -&gt; 60 - 40 = 20 =&gt; 20°C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Little-Endian byte order!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="controller-speedwheelcircumference-informations">Controller Speed/Wheel/Circumference Informations<a class="hash-link" href="#controller-speedwheelcircumference-informations" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Decoding example: 02F83203 6 70 17 B5 01 C0 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID: 02F83203</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Speed Limit Byte   1/0 : 70 17 -&gt; 0x1770              = 6000   =&gt; 60.00km/h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wheel Size Byte    3/2 : B5 01 -&gt; 0x01B5 -&gt; 0x01B . 5 = 27 . 5 =&gt; 27.5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Circumference Byte 5/4 : C0 08 -&gt; 0x08C0              = 2240   =&gt; 2240mm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Decoding example: 02F83203 6 C4 09 D0 01 C0 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID: 02F83203</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Speed Limit Byte   1/0 : C4 09 -&gt; 0x09C4              = 2500   =&gt; 25.00km/h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wheel Size Byte    3/2 : D0 01 -&gt; 0x01D0 -&gt; 0x01D . 0 = 29 . 0 =&gt; 29.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Circumference Byte 5/4 : E8 08 -&gt; 0x08E8              = 2280   =&gt; 2280mm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Little-Endian byte order!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="controller-state-informations">Controller State Informations<a class="hash-link" href="#controller-state-informations" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ID: 02FF1200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Byte: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bit0 Brake state          : 1=Brake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bit1 Motor stopped        : 1=Stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bit2 Battery undervoltage : 1=Undervoltage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="hmi-levellight-setup">HMI Level/Light Setup<a class="hash-link" href="#hmi-levellight-setup" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ID: 03106300</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Byte: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Levels number Byte 0    : 03 / 05 / 09</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set Level Byte 1        : Walk = 06 / 0 = 00 / 1 = 01 / 2 = 0B / 3 = 0C / 4 = 0D / 5 = 02 / 6 = 15 / 7 = 16 / 8 = 17 / 9 = 03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Button &quot;+&quot; Byte 2       : Off = 00 / On = 02 / Off with light = 01 / On with light = 03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Boost mode Byte 3       : Off = 01 / On = 00 (after two seconds of pressing the power button)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="torque-sensor">Torque Sensor<a class="hash-link" href="#torque-sensor" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ID: 01F83100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Numbers Byte: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Torque Byte 0/1     : EE 02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cadence Byte 2      : 00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Progressive Byte 3  : 01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="can-messages-during-operations">CAN messages during operations<a class="hash-link" href="#can-messages-during-operations" title="Direct link to heading">​</a></h2><h5 class="anchor anchorWithStickyNavbar_LWe7" id="hmi">HMI<a class="hash-link" href="#hmi" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">03106300 every 100ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="besst">BESST<a class="hash-link" href="#besst" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">05F83501 every 1016ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="controller-only-with-the-presence-of-the-hmi-or-besst">Controller (Only with the presence of the HMI or BESST)<a class="hash-link" href="#controller-only-with-the-presence-of-the-hmi-or-besst" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">02F83200 every 1500ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02F83201 every 280ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02F83202 every 100ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02F83203 every 450ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02F83205 every 300ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02FF1200 every 490ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="torque-sensor-1">Torque Sensor<a class="hash-link" href="#torque-sensor-1" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">01F83100 every 10ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="battery">Battery<a class="hash-link" href="#battery" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">04F83400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">04F83401</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">04F83402</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="can-messages-ondemand">CAN messages ondemand<a class="hash-link" href="#can-messages-ondemand" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="torque-sensor-2">Torque Sensor<a class="hash-link" href="#torque-sensor-2" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">03096000 Hardware Version Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03096001 Software Version Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03096002 Model Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03096003 Serial Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03096004 Customer Number</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="controller">Controller<a class="hash-link" href="#controller" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">03116000 Hardware Version Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03116001 Software Version Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03116002 Model Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03116003 Serial Number</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="battery-1">Battery<a class="hash-link" href="#battery-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">03216000 Hardware Version Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03216001 Software Version Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03216002 Model Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03216003 Serial Number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03216004 Customer Number</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="canbus-controller-update-procedure">CANBUS controller update procedure<a class="hash-link" href="#canbus-controller-update-procedure" title="Direct link to heading">​</a></h2><p><strong>1. Start continuesly announcing that the host (pc) is ready to transfer a firmware update:</strong></p><p>M500
<code>05FF3005 - 00 ( BESST &quot;waiting in firmware update mode&quot; or &quot;Trying to transfer&quot;)
05112000 - 88 45 02 00 (Polling: &quot;Is Controller ready for firmware?&quot;)</code> </p><p>M600
<code>05FF3005 - 00 ( BESST &quot;waiting in firmware update mode&quot; or &quot;Trying to transfer&quot;)
05112000 - 89 45 02 00 (Polling: &quot;Is Controller ready for firmware?&quot;)</code> </p><p><strong>2. Wait for Controller response:</strong>
Once you recieve this confirmation, you can stop announcing as stated in step 1.</p><p>M500</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">022A2000 - 88 45 82 (Response: &quot;Controller ready to recieve firmware&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>M600</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">022A2000 - 89 45 82 (Response: &quot;Controller ready to recieve firmware&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>3. send first package:</strong></p><p>This package contains the length of the file, minus the first 16 hex bytes, transformed into hex.
We will use ## ## ## to represent this value.</p><p>``
05142001 - ## ## ## (Transfer started from BESST, contains length in hex)</p><p><strong>4. wait for response first package:</strong></p><p>We now need to wait for the response from the controller before actually starting to send the firmware</p><p><code>022A2001 - 00 (Transfer start ack from Controller)</code> </p><p><strong>5. send data:</strong></p><p>We now send the firmware in 8 byte chunks, minus the first 16 hex bytes.
Each chunk will be numbered in hexadecimal, starting from 0000. After each chunk we will recieve a response verifying the transfer has been completed successfully.
We will use #### to represent the ever incrementing chunk numbers. While we list only one response, ofcoarse this means multiple chunks get send with incrementing frame numbers.
We will use XX XX XX XX XX XX XX XX to represent the file content that is getting transfered.</p><p>Do not send the last data package this way though...</p><p>Data send:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0515#### - XX XX XX XX XX XX XX XX (Data transfer packages)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response from controller:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">022A#### - (Data transfer packages ack from controller)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>6. send last data and end transfer:</strong></p><p>This package needs to go towards a different frameID, to signal the controller that the transfer has been completed.
The content of the package can vary in length up to 8 bytes, which we will simulate by using XX.
The #### is still the autoincrement number from step 5.</p><p>Data send:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0516#### - XX (Transfer completed from BESST)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response from controller:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">022A#### - (Data transfer packages ack from controller)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OpenSourceEBike/OpenSourceEBike.github.io/tree/master/docs/bafang/Hardware/CANBUS/canbus.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/bafang/Hardware/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hardware</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/bafang/Hardware/Display/display_DP_C241"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">display_DP_C241</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#diy-canbus-configuration" class="table-of-contents__link toc-highlight">DIY CANBUS configuration</a></li><li><a href="#pinout" class="table-of-contents__link toc-highlight">Pinout</a></li><li><a href="#global-enums-in-besst-code" class="table-of-contents__link toc-highlight">Global Enums in BESST code</a></li><li><a href="#known-working-canbus-commands" class="table-of-contents__link toc-highlight">Known working CANBUS commands</a></li><li><a href="#can-messages-during-operations" class="table-of-contents__link toc-highlight">CAN messages during operations</a></li><li><a href="#can-messages-ondemand" class="table-of-contents__link toc-highlight">CAN messages ondemand</a></li><li><a href="#canbus-controller-update-procedure" class="table-of-contents__link toc-highlight">CANBUS controller update procedure</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 OpenSource-EBike</div></div></div></footer></div>
<script src="/assets/js/runtime~main.56828880.js"></script>
<script src="/assets/js/main.f1cf1c2b.js"></script>
</body>
</html>