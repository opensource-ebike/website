<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-display/build_display-bafang_m500_M600">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="OpenSource-EBike" href="/opensearch.xml">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9270569596814796" crossorigin="anonymous"></script><title data-rh="true">Build the display (M500/M600) | OpenSource-EBike</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://opensource-ebike.org/docs/display/build_display-bafang_m500_M600"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Build the display (M500/M600) | OpenSource-EBike"><meta data-rh="true" name="description" content="NOTE that this display only works for Bafang M500/M510/M600 motors."><meta data-rh="true" property="og:description" content="NOTE that this display only works for Bafang M500/M510/M600 motors."><link data-rh="true" rel="icon" href="/img/hotlink-ok/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://opensource-ebike.org/docs/display/build_display-bafang_m500_M600"><link data-rh="true" rel="alternate" href="https://opensource-ebike.org/docs/display/build_display-bafang_m500_M600" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://opensource-ebike.org/docs/display/build_display-bafang_m500_M600" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WZ05W1IA1Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.73f5193e.css">
<link rel="preload" href="/assets/js/runtime~main.f72cbde1.js" as="script">
<link rel="preload" href="/assets/js/main.253a7bce.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/hotlink-ok/logo/logo.svg" alt="OpenSource-Ebike logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/hotlink-ok/logo/logo.svg" alt="OpenSource-Ebike logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OpenSource-Ebike</b></a><a class="navbar__item navbar__link" href="/docs/tsdz2/intro">TSDZ2</a><a class="navbar__item navbar__link" href="/docs/bafang/intro">Bafang</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/display/intro">Display</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/display/build_display-bafang_m500_M600" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><a href="https://github.com/OpenSourceEBike/OpenSourceEBike.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/display/intro">OpenSource Ebike display</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/display/build_display">Build the display (TSDZ2)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/display/build_display-bafang_m500_M600">Build the display (M500/M600)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/display/bootloader">Installing the bootloader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/display/dfu">Device Firmware Update (DFU)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/display/stlinkv2">Using the stlinkv2</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/display/TSDZ2 wireless project/">TSDZ2 Wireless Project</a><button aria-label="Toggle the collapsible sidebar category &#x27;TSDZ2 Wireless Project&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/display/development/">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Build the display (M500/M600)</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Build the display (M500/M600)</h1><p>NOTE that this display only works for Bafang M500/M510/M600 motors.</p><p>Some of the following components can be bought in online shops like Aliexpress, Ebay or at specialized electronics shops like <a href="https://mouser.com/" target="_blank" rel="noopener noreferrer">www.mouser.com</a> or <a href="https://www.farnell.com/" target="_blank" rel="noopener noreferrer">www.farnell.com</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="componentes">Componentes<a class="hash-link" href="#componentes" title="Direct link to heading">​</a></h2><p>You will need the following components:</p><ul><li><strong>OLED display SPI 128x64 pixels 1.3 inches or 0.96 inches (I2C display version will not work)</strong>: costs 3€. You need to choose the bigger or the smaller version. It is recommended the bigger 1.3 inches version (the 3D printed enclosure is only available for this one). The smaller version makes impossible to see the numbers on display while riding, you need to stop to be able to read.<br><img loading="lazy" src="/assets/images/oled_display_1.3-spi-788bc57679e89729c12d605f88730a1a.png" width="350" height="332" class="img_ev3q"><br></li><li><strong>nRF52840 Nordic USB Dongle</strong>: costs 11€.<br><img loading="lazy" src="/assets/images/NRF52840-0b417dc04f8f74eaf03676dae8f9b607.png" width="347" height="244" class="img_ev3q"><br></li><li><strong>CAN SPI module</strong>: costs 4€.<br><img loading="lazy" src="/assets/images/can_module_spi-a3494a5bcbb0e9c2ee098048e74ac33a.jpg" width="350" height="278" class="img_ev3q"><br></li><li><strong>Step down 80V -&gt; 5V power board <a href="https://export.rsdelivers.com/product/xp-power/sth0548s05/xp-power-surface-mount-dc-dc-switching-regulator/1883365" target="_blank" rel="noopener noreferrer">XP Power STH0548S05</a></strong>: costs 11€.<br><img loading="lazy" src="/assets/images/dcdc-5d0fd72054d13b484d1e1f4de9fbdaea.png" width="350" height="261" class="img_ev3q"><br></li><li><strong>3 or 4 buttons remote</strong>: costs 8€. The 3 buttons is from the EBike 850C display, that can be bought as a spare part - search on Aliexpress for &quot;850c extension&quot;. The 4 buttons is from the EBike 860C display, that can be bought as a spare part but can be hard to find.<br>
If you want the ANT+ REMOTE functionalitty (Garmin Edge page change), you will need to use the 4 buttons remote, as this function happens when you press the button number 4.<br><img loading="lazy" src="/assets/images/850c_keypad-e3c165b2ce1f8acade938a33bae133d0.png" width="350" height="277" class="img_ev3q"><br></li><li><strong>Bafang M500/M510/M600 display extension cable (HIGO-B5 connector)</strong>: <a href="https://www.aliexpress.com/item/1005003656557018.html" target="_blank" rel="noopener noreferrer">costs 8€</a><br><img loading="lazy" src="/assets/images/display_cable-3d02d252ac46969c559732c052aba32f.png" width="350" height="253" class="img_ev3q"><br></li><li><strong>2x Diode 1N4148</strong>: can be SMD 0805 size. Costs 0.1€, can be bought on EBay or other shops.<br></li><li><strong>Resistor 470 ohms</strong>: can be SMD 0805 size. Costs 0.1€, can be bought on EBay or other shops.<br></li><li><strong>Resistor 1500 ohms</strong>: can be SMD 0805 size. Costs 0.1€, can be bought on EBay or other shops.<br></li><li><strong>2x resistor 3300 ohms</strong>: can be SMD 0805 size. Costs 0.2€, can be bought on EBay or other shops.<br></li><li><strong>Perf board</strong>: costs 1€.<br><img loading="lazy" src="/assets/images/perfboard-a23a3d3b2e660d345936ddfc09a68704.jpg" width="300" height="267" class="img_ev3q"><br></li><li><strong>Four screws M2x12</strong>: costs 1€. Buy them in black color if you plan to 3D print the enclose in black color.<br><img loading="lazy" src="/assets/images/screw-866013843a343f8af56a91e11893d4da.jpg" width="300" height="212" class="img_ev3q"><br></li><li><strong>Silicone</strong>: costs 4€, can be bought on EBay or other shops. The silicone will be used to seal the enclosure and make it water prof. There are silicone that is fast to cure like in two hours but this can not work very well, like not gluing well to the 3D printed plastic PLA. There are small tubes of silicone at shops, that you can use just a few pieces at a time.<br><img loading="lazy" src="/assets/images/silicone-ead417b0b6122015d5e357bbb6e0c917.jpg" width="149" height="400" class="img_ev3q"><br><br></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tools">Tools<a class="hash-link" href="#tools" title="Direct link to heading">​</a></h2><p>You will need at least the following tools:</p><ul><li><strong>Multimeter</strong>: to check the wires connections, voltages and components.</li><li><strong>Power supply</strong>: to power the display for testing during the build, where you limit the current to a minimum to avoid burning some component in the case you soldered something wrong. If you do not have one yet, you can buy a cheap digital lab power supply of adjustable voltage up to 30V and adjustbale current up to 10A, on Aliexpress for about 50€.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-instructions">Step by step instructions<a class="hash-link" href="#step-by-step-instructions" title="Direct link to heading">​</a></h2><p>1 - <strong>Flash bootloader and firmware on the nrf52840 board</strong> - see the page:<br>
1.1 - <a href="/docs/display/bootloader">How to Flash the Wireless Bootloader on a Nordic Dongle</a><br>
1.2 - <a href="/docs/display/dfu">How to update the firmware</a><br></p><p>In the steps 1.1 and 1.2 you flash the bootloader and then update the firmware, if all goes as expected, then the NRF52840 board is working.</p><p>2 - <strong>3D print the enclosure</strong>:</p><p><img loading="lazy" src="/assets/images/enclosure_3d-3e20d99c5d61e49536391c523c9f19e4.png" width="1434" height="1128" class="img_ev3q">
3D files for 3D printing (1.3 inches OLED display only):</p><ul><li><a target="_blank" href="/assets/files/base-44bd44a6a094a1d4eacac3b23465e7fe.amf">base.amf</a> (purple in the picture)</li><li><a target="_blank" href="/assets/files/cover-e21b00e151d18b8f5b9a4f591160bf3f.amf">cover.amf</a> (blue in the picture)</li><li><a target="_blank" href="/assets/files/clamp-1c307053d4fc4d53d27c6bf7db62b9d2.amf">clamp.amf</a> (orange in the picture).</li></ul><p>3 - <strong>Build your board</strong></p><p>3.1 - Understand the circuit, see the schematic:<br>
<a target="_blank" href="/assets/files/schematic-Bafang_M500_M600-ff60f309b58c224dc71df563454c4f48.png"><img loading="lazy" src="/assets/images/schematic-Bafang_M500_M600-ff60f309b58c224dc71df563454c4f48.png" width="2179" height="1720" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schematic-explanation">Schematic explanation<a class="hash-link" href="#schematic-explanation" title="Direct link to heading">​</a></h3><ul><li><p>the DC-DC converts the high battery voltage and outputs 5 volts, which will then be the input for the NRF52840 board as also to the OLED display.</p></li><li><p>the wireless board has the NRF52840 microcontroller that is &quot;the brain&quot; of the display, and communicates with the OLED display and CAN module using SPI lines. It also reads the remote buttons state.<br>
In the case you are using 4 buttons keypad, connect the button number 4 to the pin P0.17 of the NRF52840 board.</p></li><li><p>the CAN module sends and receive data to the Bafang motors.</p></li><li><p>the resistors and diodes implement the same circuit as the Bafang M500/M510/M600 original display.</p></li><li><p>when the display is off, the CTRL wire has battery voltage and P+ VBAT has 0 volts. Once the user presses ON/OFF button on the remote, the CTRL wire will then have 4.5 volts and if user long press the ON/OFF button, the P+ VBAT will get the battery voltage (to power up the display).<br>
The DOWN button has a similar circuit and the Bafang motor controller uses it to detect when users wants the walk assist mode.</p></li></ul><p>NRF52840 board pinout:
<img loading="lazy" alt="Pinout" src="/assets/images/nordic_pinout-6c61d93a2e0d56243c231d677b7fedcf.png" width="1378" height="1058" class="img_ev3q"></p><p>3.2 - Cut your nRF52840 board with a metal saw by hand so this way it will be smaller. Check it is ok on the enclosure, if not you can use a file tool to do the final adjustment.<br>
Also cut the CAN module board, the display board and the perfboard, to the similar sizes / shapes as seen on the picture. All this boards need to go inside the 3D printed enclosure - here a picture as example:</p><p><img loading="lazy" src="/assets/images/build-7-75f161a68eb1deff36ce93dc984f9f2d.png" width="1280" height="519" class="img_ev3q"></p><p>3.3 - Use thin double layer tape to fix the DC-DC to the back of perfboard. Solder thin wires to the GND, Vin and Vout pins (look at the datasheet of the DC-DC to find the pins) that will be used on the front side of perfboard:<br>
<img loading="lazy" src="/assets/images/build-8-4db1c2812bb1d3ca99a18921a0214629.png" width="1280" height="893" class="img_ev3q"></p><p>NOTE: always triple check the connections you did as it is easy for you to do a mistake. For instance, exchanging battery voltage pin with GND pin will most probably result in a burned NRF52840 and/or the DC-DC board.</p><p>How can use the power supply with 10V and limited current like 50mA, to power up the DC-DC and see if it correctly provides 5V at his output. </p><p>Next, use some tape to insulate the bottom of the wireless board and solder it on the front of perfboard, as seen on the image.<br>
Also solder the resistors and diodes as seen on the image (this are SMD 0805 size):
<img loading="lazy" src="/assets/images/build-5-9ec25db6b8241eac343cbd302eb069e8.png" width="1280" height="1189" class="img_ev3q"></p><p>Wire the DC-DC output wires GND and 5V to the wireless board (follow the schematic).</p><p>Now you can use the power supply with 10V and limited current like 50mA, to power up the DC-DC and see if LEDs on the wireless board blink (bootloader must be already flashed on this step) when you apply the power. You can also check that wireless board OUT pin is 3.3V.</p><p>Continue to wire everything as seen om the schematic but leave the CAN module for the end. See next picture.</p><p><img loading="lazy" src="/assets/images/build-6-75d59677bddbaf897e4ebfcd901a2e97.png" width="1280" height="988" class="img_ev3q"></p><p>Use thin wires when possible. For the wires of display extension cable, you will need to figure out each pin on the HIGO-B5 connector - see next image.</p><p><img loading="lazy" src="/assets/images/Bafang_M500_M600_Display_Cable-8f5e1c0b35421f5208f11063376de4fc.png" width="1494" height="722" class="img_ev3q"></p><p>Now that you have the display cable wired, giving power to DC-DC, that will then power the wireless board and the OLED display, and the remote buttons wired, you can now connect to your Bafang motor. You can use the power supply with 30V and with current limit to a current like 100mA, to power up your Bafang motor. That way, if you made any mistakes when connecting the cables to the display, hopefully nothing will burn.</p><p>Assuming the bootloader and firmware are already flashed on this step, when you long press the ON/OFF button, you should see the OLED display turn on. It should not go to main screen as the motor communications are not yet ready because the CAN module board is not yet connected.</p><p>Finally wire the CAN module board:</p><p><img loading="lazy" src="/assets/images/build-4-0dd3a6840b634df7292a779f0ef3415d.png" width="1280" height="1003" class="img_ev3q"></p><p>In the end, the display should show the same way as next picture. Note that I did setup my power supply to 30V, that is why the motor controller sends the battery voltage value as about 30V and battery SOC as empty, since my motor is for a 48V battery.</p><p><img loading="lazy" src="/assets/images/build-3-cc978b15e2915ec1258081c889188938.png" width="1137" height="1280" class="img_ev3q"></p><p>Now it is time to put everything inside the 3D printed enclosure. The big hole at back is enough for the two cables to be inserted. Here an example, and after using transparent silione to keep the cables in place and avoid water entrance:</p><p><img loading="lazy" src="/assets/images/build-1-231a84da4729ace0202e538b87bbde1f.png" width="1939" height="1588" class="img_ev3q"></p><p>On the top, to protect the OLED display and avoid watter entrance, you can put large glue tape as seen on the picture. There are enough clearance on the cover 3D printed part to accomodate this tape:</p><p><img loading="lazy" src="/assets/images/build-2-1fb5a70edb0aa462e72c23145b45e3de.png" width="1154" height="689" class="img_ev3q"></p><p>Use the M2x12 screws to tight the cover as also to clamp to the handlebar.</p><p>Example of the final result:</p><p>(On this picture, not glue tape were yet applied on to of the OELD display)
<img loading="lazy" src="/assets/images/08-8cc6309aa4f17d07c496cb79f31b4579.png" width="1633" height="1228" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/02-8b20b19c148712abf35c0b198da13875.png" width="1310" height="1676" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/04-29d9fd300c3f193da0837cf01c65d0e7.png" width="1443" height="1676" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OpenSourceEBike/OpenSourceEBike.github.io/tree/master/docs/display/build_display-bafang_m500_M600.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/display/build_display"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Build the display (TSDZ2)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/display/bootloader"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installing the bootloader</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#componentes" class="table-of-contents__link toc-highlight">Componentes</a></li><li><a href="#tools" class="table-of-contents__link toc-highlight">Tools</a></li><li><a href="#step-by-step-instructions" class="table-of-contents__link toc-highlight">Step by step instructions</a><ul><li><a href="#schematic-explanation" class="table-of-contents__link toc-highlight">Schematic explanation</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 OpenSource-EBike</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f72cbde1.js"></script>
<script src="/assets/js/main.253a7bce.js"></script>
</body>
</html>