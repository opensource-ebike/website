"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[728],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return d}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),f=c(r),d=a,h=f["".concat(s,".").concat(d)]||f[d]||u[d]||o;return r?n.createElement(h,l(l({ref:t},p),{},{components:r})):n.createElement(h,l({ref:t},p))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=f;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var c=2;c<o;c++)l[c]=r[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},2467:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return u}});var n=r(3117),a=r(102),o=(r(7294),r(3905)),l=["components"],i={},s=void 0,c={unversionedId:"bafang/Hardware/Display/display_DP_C241",id:"bafang/Hardware/Display/display_DP_C241",title:"display_DP_C241",description:"Table of Contents",source:"@site/docs/bafang/Hardware/Display/display_DP_C241.md",sourceDirName:"bafang/Hardware/Display",slug:"/bafang/Hardware/Display/display_DP_C241",permalink:"/docs/bafang/Hardware/Display/display_DP_C241",draft:!1,editUrl:"https://github.com/opensource-ebike/site/tree/master/docs/bafang/Hardware/Display/display_DP_C241.md",tags:[],version:"current",frontMatter:{},sidebar:"bafangSidebar",previous:{title:"CANBUS",permalink:"/docs/bafang/Hardware/CANBUS/"},next:{title:"maintenance_and_repair",permalink:"/docs/bafang/Hardware/maintenance_and_repair"}},p={},u=[{value:"Pictures of internals",id:"pictures-of-internals",level:2}],f={toc:u};function d(e){var t=e.components,i=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,n.Z)({},f,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Table of Contents")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#display-dp-c240--c241"},"Display DP C240 / C241"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#pictures-of-internals"},"Pictures of internals")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#how-to-turn-onoff-the-bafang-m500m600-motor-controller"},"How to turn on/off the Bafang M500/M600 motor controller"))),(0,o.kt)("h1",{id:"display-dp-c240--c241"},"Display DP C240 / C241"),(0,o.kt)("p",null,"Seems this displays are just only one, that always include the Bluetooth hardware but probably the DP C240 has a different firmware with Bluetooth disabled."),(0,o.kt)("h2",{id:"pictures-of-internals"},"Pictures of internals"),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(9259).Z,width:"3518",height:"2776"}),(0,o.kt)("br",null),"\nOn bottom left the connectors. Green connector connects to the motor controller. The purple connector connects to the remote keypad."),(0,o.kt)("p",null,"On top left is the Bluetooth module."),(0,o.kt)("p",null,"On bottom right is the USB connector for charging a device. That coil, diode and IC should part of the circuit to regulate and protect on the power to charging provided on the connector."),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(2976).Z,width:"3475",height:"2649"}),(0,o.kt)("br",null),"\nThis side of the board had probably the DC-DC to convert the battery voltage to display voltage like maybe 5V or 3.3V. It may also have the circuit to turn on/off the motor controller."),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(3344).Z,width:"4113",height:"3126"}),(0,o.kt)("br",null),"\nThe microcontroller of this display, the famous STM32F103C8T6."),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(1216).Z,width:"4110",height:"3240"}),(0,o.kt)("br",null),"\nThe display. At right side, that is probably a light sensor."),(0,o.kt)("h1",{id:"how-to-turn-onoff-the-bafang-m500m600-motor-controller"},"How to turn on/off the Bafang M500/M600 motor controller"),(0,o.kt)("p",null,"There are 5 pins to connect the display to the motor controller:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"GND (Ground)"),(0,o.kt)("li",{parentName:"ul"},"CAN_H (CANBUS High)"),(0,o.kt)("li",{parentName:"ul"},"CAN_L (CANBUS Low)"),(0,o.kt)("li",{parentName:"ul"},"P+ (Enable / disable the motor controller)"),(0,o.kt)("li",{parentName:"ul"},"VCC (Voltage battery to power the display)")),(0,o.kt)("p",null,"The on/off button on the display pulls the P+ wire (it has battery voltage from a pull up resistor) to ground. This signals the motor controller to put the battery voltage on the VCC wire as supply for the display. If the motor controller gets no valid CAN messages from the display, it switches off the VBAT wire (put GND on VCC wire), turning off the display, supply after a few seconds."),(0,o.kt)("p",null,(0,o.kt)("a",{target:"_blank",href:r(4586).Z},"Log of CAN messages when display turns on"),"."),(0,o.kt)("p",null,(0,o.kt)("a",{target:"_blank",href:r(4586).Z},"Log of CAN messages when display turns off"),"."))}d.isMDXComponent=!0},4586:function(e,t,r){t.Z=r.p+"assets/files/CAN_stop_sequence-54e1ae248dc89715ac40c6ffad11463f.txt"},9259:function(e,t,r){t.Z=r.p+"assets/images/DP-C241C-01-1f83f96bdfc11c46af980d77198a0edc.jpg"},2976:function(e,t,r){t.Z=r.p+"assets/images/DP-C241C-02-71749c3b73bffe759b92a2ae0758580f.jpg"},3344:function(e,t,r){t.Z=r.p+"assets/images/DP-C241C-03-d5f8117ff1444626520d2fff1fc5db03.jpg"},1216:function(e,t,r){t.Z=r.p+"assets/images/DP-C241C-04-215e1370b9444acc9abf5cbfc5cc4abf.jpg"}}]);